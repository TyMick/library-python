<!DOCTYPE html>
<html lang="en">
  <!-- prettier-ignore -->
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link id="favicon" rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon" />

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous" />
    <!-- highlight.js -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/default.min.css" />

    <title>Python personal library microservice â€“ Ty Mick</title>
  </head>

  <body style="background-color: #dee2e6">
    <div class="container my-5">
      <h1 class="mb-4">Personal library microservice</h1>

      <!-- API test front end -->
      <div class="card mb-4">
        <div class="card-body">
          <h4 class="mb-3">Test this API:</h4>

          <!-- Add a new book -->
          <form id="addBook" class="mb-4">
            <h5>Add a new book</h5>

            <div class="form-row">
              <div
                class="col-md mr-md-3 mb-1 mb-md-0"
                style="max-width: 7.5rem"
              >
                <label for="addBookUrl" class="sr-only">API URL</label>
                <input
                  type="text"
                  class="form-control"
                  id="addBookUrl"
                  value="/api/books"
                  disabled
                />
              </div>
              <label for="addTitle" class="col-md-auto col-form-label"
                >Title</label
              >
              <div class="col-md mb-3 mb-md-0 mr-md-3" style="max-width: 20rem">
                <input
                  type="text"
                  class="form-control"
                  id="addTitle"
                  name="title"
                />
              </div>
              <div class="col-md-auto">
                <button type="submit" class="btn btn-primary">POST</button>
              </div>
            </div>
          </form>

          <!-- List all books -->
          <form id="getAllBooks" class="mb-4">
            <h5>List all books</h5>

            <div class="form-row">
              <div class="col mr-1 mr-sm-3" style="max-width: 7.5rem">
                <label for="getBooksUrl" class="sr-only">API URL</label>
                <input
                  type="text"
                  class="form-control"
                  id="getBooksUrl"
                  value="/api/books"
                  disabled
                />
              </div>
              <div class="col-auto">
                <button type="submit" class="btn btn-primary">GET</button>
              </div>
            </div>
          </form>

          <!-- Delete all books -->
          <form id="deleteAllBooks" class="mb-4">
            <h5>Delete all books</h5>

            <div class="form-row">
              <label for="deleteBooksUrl" class="sr-only">API URL</label>
              <div class="col mr-1 mr-sm-3" style="max-width: 7.5rem">
                <input
                  type="text"
                  class="form-control"
                  id="deleteBooksUrl"
                  value="/api/books"
                  disabled
                />
              </div>
              <div class="col-auto">
                <button type="submit" class="btn btn-primary">DELETE</button>
              </div>
            </div>
          </form>

          <!-- Add a comment to a book -->
          <form id="addComment" class="mb-4">
            <h5>Add a comment to a book</h5>

            <div class="form-row">
              <div
                class="col-lg mr-lg-3 mb-1 mb-lg-0"
                style="max-width: 23.5rem"
              >
                <label for="postId" class="sr-only"
                  >Book <code>_id</code></label
                >
                <div class="input-group">
                  <div class="input-group-prepend">
                    <div class="input-group-text">/api/books/</div>
                  </div>
                  <input
                    type="text"
                    class="form-control"
                    id="postId"
                    name="_id"
                    placeholder="_id"
                  />
                </div>
              </div>
              <label for="postComment" class="col-lg-auto col-form-label"
                >Comment</label
              >
              <div class="col-lg mb-3 mb-lg-0 mr-lg-3">
                <input
                  type="text"
                  class="form-control"
                  id="postComment"
                  name="comment"
                />
              </div>
              <div class="col-lg-auto">
                <button type="submit" class="btn btn-primary">POST</button>
              </div>
            </div>
          </form>

          <!-- Show one book -->
          <form id="getOneBook" class="mb-4">
            <h5>Show one book, with comments</h5>

            <div class="form-row">
              <div
                class="col-sm mr-1 mr-sm-3 mb-3 mb-sm-0"
                style="max-width: 23.5rem"
              >
                <label for="getId" class="sr-only">Book <code>_id</code></label>
                <div class="input-group">
                  <div class="input-group-prepend">
                    <div class="input-group-text">/api/books/</div>
                  </div>
                  <input
                    type="text"
                    class="form-control"
                    id="getId"
                    name="_id"
                    placeholder="_id"
                  />
                </div>
              </div>
              <div class="col-sm-auto">
                <button type="submit" class="btn btn-primary">GET</button>
              </div>
            </div>
          </form>

          <!-- Delete a book -->
          <form id="deleteBook">
            <h5>Delete a book</h5>

            <div class="form-row">
              <div
                class="col-sm mr-1 mr-sm-3 mb-3 mb-sm-0"
                style="max-width: 23.5rem"
              >
                <label for="deleteId" class="sr-only"
                  >Book <code>_id</code></label
                >
                <div class="input-group">
                  <div class="input-group-prepend">
                    <div class="input-group-text">/api/books/</div>
                  </div>
                  <input
                    type="text"
                    class="form-control"
                    id="deleteId"
                    name="_id"
                    placeholder="_id"
                  />
                </div>
              </div>
              <div class="col-sm-auto">
                <button type="submit" class="btn btn-primary">GET</button>
              </div>
            </div>
          </form>

          <!-- API output -->
          <div
            class="modal fade"
            id="apiOutputModal"
            tabindex="-1"
            role="dialog"
            aria-labelledby="apiOutputLabel"
            aria-hidden="true"
          >
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="apiOutputLabel">API response</h5>
                  <button
                    type="button"
                    class="close"
                    data-dismiss="modal"
                    aria-label="Close"
                  >
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <pre id="apiOutput" class="hljs bg-white mb-0"></pre>
                </div>
                <div class="modal-footer">
                  <button
                    type="button"
                    class="btn btn-secondary"
                    data-dismiss="modal"
                  >
                    Close
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Explanation -->
      <p class="lead font-italic">
        View the source on
        <a href="https://github.com/tywmick/library-python">GitHub</a> or
        <a href="https://repl.it/@tywmick/library-python">Repl.it</a>.
      </p>

      <p>
        This is a Python port of my
        <a href="https://ty-library.glitch.me"
          >Node.js personal library microservice</a
        >, built with
        <a href="https://flask.palletsprojects.com/en/1.1.x/">Flask</a> and
        <a href="https://sqlite.org/index.html">SQLite</a>. The above front end
        API tests also uses <a href="https://getbootstrap.com/">Bootstrap</a>,
        <a href="https://jquery.com/">jQuery</a>, and
        <a href="https://highlightjs.org/">highlight.js</a>. The API fulfills
        the following user stories:
      </p>

      <ol>
        <li>
          I can <b>post</b> a <code>title</code> to <code>/api/books</code> to
          add a book and returned will be the object with the
          <code>title</code> and a unique <code>_id</code>.
        </li>
        <li>
          I can <b>get</b> <code>/api/books</code> to retrieve an aray of all
          books containing <code>title</code>, <code>_id</code>, &amp;
          <code>commentcount</code>.
        </li>
        <li>
          I can <b>get</b> <code>/api/books/{_id}</code> to retrieve a single
          object of a book containing <code>title</code>, <code>_id</code>,
          &amp; an array of <code>comments</code> (empty array if no comments
          present).
        </li>
        <li>
          I can <b>post</b> a <code>comment</code> to
          <code>/api/books/{_id}</code> to add a comment to a book and returned
          will be the books object similar to <b>get</b>
          <code>/api/books/{_id}</code>.
        </li>
        <li>
          I can <b>delete</b> <code>/api/books/{_id}</code> to delete a book
          from the collection. Returned will be
          <code>"delete successful"</code> if successful.
        </li>
        <li>
          If I try to request a book that doesn't exist I will get a
          <code>"no book exists"</code> message.
        </li>
        <li>
          I can send a <b>delete</b> request to <code>/api/books</code> to
          delete all books in the database. Returned will be
          <code>"complete delete successful"</code> if successful.
        </li>
      </ol>
    </div>

    <!-- prettier-ignore -->
    <span>
      <!-- jQuery -->
      <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
      <!-- Popper -->
      <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
      <!-- Bootstrap -->
      <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
      <!-- highlight.js -->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js"></script>
    </span>

    <!-- Page scripts -->
    <script src="{{ url_for('static', filename='client.js') }}"></script>
  </body>
</html>
